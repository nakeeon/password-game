<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>üîê –ü—ñ–Ω-–∫–æ–¥–∏ —ñ –ø–∞—Ä–æ–ª—ñ</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Comic+Neue:wght@400;700&display=swap');
  *{box-sizing:border-box;margin:0;padding:0}
  body{font-family:'Comic Neue','Comic Sans MS',cursive;background:linear-gradient(135deg,#e8f0fe,#f0e8fe,#e8feef);min-height:100vh;padding:10px}
  .container{max-width:520px;margin:0 auto}
  h1{text-align:center;font-size:26px;color:#2c3e80;margin:10px 0}
  .subtitle{text-align:center;font-size:15px;color:#666;margin-bottom:15px}

  /* Menu */
  .menu{text-align:center}
  .menu-btn{display:block;width:100%;padding:18px 20px;margin:10px 0;border:none;border-radius:16px;font-size:20px;font-weight:700;font-family:inherit;cursor:pointer;color:white;box-shadow:0 3px 12px rgba(0,0,0,0.15);transition:transform 0.15s;text-align:left}
  .menu-btn:active{transform:scale(0.97)}
  .menu-btn span{font-size:28px;margin-right:8px;vertical-align:middle}
  .btn-create{background:linear-gradient(135deg,#4CAF50,#2e7d32)}
  .btn-detect{background:linear-gradient(135deg,#2196F3,#1565c0)}
  .btn-share{background:linear-gradient(135deg,#FF9800,#e65100)}

  /* Game screens */
  .game-screen{display:none}
  .back-btn{background:none;border:2px solid #ddd;border-radius:20px;padding:6px 16px;font-size:14px;font-family:inherit;color:#888;cursor:pointer;margin-bottom:12px}
  .back-btn:active{background:#f0f0f0}

  /* Common card */
  .card{background:white;border-radius:16px;padding:16px;margin-bottom:10px;box-shadow:0 2px 10px rgba(0,0,0,0.08)}
  .card-title{font-size:18px;font-weight:700;color:#333;margin-bottom:8px}

  /* === GAME 1: Create password === */
  .password-input{width:100%;padding:14px;border:2px solid #ddd;border-radius:12px;font-size:22px;font-family:inherit;text-align:center;letter-spacing:3px;outline:none;transition:border-color 0.3s}
  .password-input:focus{border-color:#4a90d9}
  .strength-bar{height:12px;border-radius:6px;background:#eee;margin:10px 0;overflow:hidden}
  .strength-fill{height:100%;border-radius:6px;transition:width 0.4s,background 0.4s}
  .strength-text{text-align:center;font-size:18px;font-weight:700;min-height:28px}
  .rules-list{list-style:none;padding:0;margin:10px 0}
  .rules-list li{padding:6px 0;font-size:16px;display:flex;align-items:center;gap:8px}
  .rule-icon{font-size:20px;width:28px;text-align:center}
  .tip-box{background:#fff9c4;border-radius:12px;padding:12px;margin-top:10px;font-size:15px;color:#795548;text-align:center}

  /* === GAME 2: Detective === */
  .password-card{background:white;border-radius:16px;padding:16px;margin-bottom:10px;box-shadow:0 2px 10px rgba(0,0,0,0.08);text-align:center;transition:transform 0.2s}
  .password-display{font-size:28px;font-weight:700;color:#333;font-family:'Courier New',monospace;letter-spacing:2px;margin:8px 0;word-break:break-all}
  .answer-btns{display:flex;gap:10px;justify-content:center;margin-top:10px}
  .answer-btn{padding:10px 24px;border-radius:30px;border:none;font-size:18px;font-weight:700;font-family:inherit;cursor:pointer;transition:transform 0.15s}
  .answer-btn:active{transform:scale(0.9)}
  .btn-safe{background:#e8f5e9;color:#2e7d32}
  .btn-unsafe{background:#ffebee;color:#c62828}
  .feedback{font-size:16px;font-weight:700;margin-top:8px;min-height:24px;animation:fadeIn 0.3s}
  @keyframes fadeIn{from{opacity:0;transform:translateY(-5px)}to{opacity:1;transform:translateY(0)}}
  .progress-dots{display:flex;justify-content:center;gap:6px;margin:10px 0}
  .dot{width:14px;height:14px;border-radius:50%;background:#ddd;transition:background 0.3s}
  .dot-correct{background:#4CAF50}
  .dot-wrong{background:#f44336}
  .dot-current{background:#FFD700;box-shadow:0 0 8px rgba(255,215,0,0.5)}

  /* === GAME 3: Share or not === */
  .situation-card{background:white;border-radius:16px;padding:20px;margin-bottom:10px;box-shadow:0 2px 10px rgba(0,0,0,0.08);text-align:center}
  .situation-emoji{font-size:52px;margin-bottom:10px}
  .situation-text{font-size:18px;color:#333;line-height:1.5;margin-bottom:14px}
  .share-btns{display:flex;gap:12px;justify-content:center}
  .share-btn{padding:12px 28px;border-radius:30px;border:none;font-size:20px;font-weight:700;font-family:inherit;cursor:pointer;transition:transform 0.15s}
  .share-btn:active{transform:scale(0.9)}
  .btn-yes{background:#e8f5e9;color:#2e7d32}
  .btn-no{background:#ffebee;color:#c62828}
  .explain{font-size:15px;color:#555;margin-top:10px;min-height:20px;line-height:1.4}

  /* Score */
  .score-section{background:white;border-radius:20px;padding:20px;text-align:center;box-shadow:0 4px 15px rgba(0,0,0,0.1);margin-top:15px}
  .score-big{font-size:52px;font-weight:700;color:#2c3e80}
  .score-label{font-size:16px;color:#888}
  .score-emoji{font-size:48px;margin:8px 0}
  .score-msg{font-size:20px;font-weight:700;margin:8px 0}
  .retry-btn{background:linear-gradient(135deg,#4CAF50,#2e7d32);color:white;border:none;border-radius:30px;padding:12px 32px;font-size:18px;font-weight:700;font-family:inherit;cursor:pointer;margin-top:12px}
  .retry-btn:active{transform:scale(0.95)}

  .confetti-piece{position:fixed;border-radius:2px;animation:confettiFall 3s ease-out forwards;pointer-events:none;z-index:1000}
  @keyframes confettiFall{0%{transform:translateY(-10px) rotate(0deg);opacity:1}100%{transform:translateY(100vh) rotate(720deg);opacity:0}}

  .counter{font-size:14px;color:#999;text-align:center;margin-bottom:8px}
</style>
</head>
<body>
<div class="container">
  <h1>üîê –ü—ñ–Ω-–∫–æ–¥–∏ —ñ –ø–∞—Ä–æ–ª—ñ</h1>
  <p class="subtitle">–ù–∞–≤—á–∏—Å—å –∑–∞—Ö–∏—â–∞—Ç–∏ —Å–≤–æ—ó –¥–∞–Ω—ñ!</p>

  <!-- NAME INPUT -->
  <div id="nameScreen" class="menu">
    <div class="card" style="text-align:center">
      <div style="font-size:48px;margin-bottom:10px">üëã</div>
      <div class="card-title" style="text-align:center;font-size:22px">–Ø–∫ —Ç–µ–±–µ –∑–≤–∞—Ç–∏?</div>
      <input type="text" class="password-input" id="nameInput" placeholder="–í–≤–µ–¥–∏ —Å–≤–æ—î —ñ–º'—è..." style="font-size:20px;letter-spacing:0;margin-top:10px" onkeydown="if(event.key==='Enter')saveName()">
      <button class="menu-btn btn-create" onclick="saveName()" style="margin-top:12px;text-align:center;font-size:20px">–ü–æ—á–∞—Ç–∏! üöÄ</button>
    </div>
  </div>

  <!-- MENU -->
  <div id="menu" class="menu" style="display:none">
    <div style="text-align:center;font-size:18px;color:#555;margin-bottom:8px">–ü—Ä–∏–≤—ñ—Ç, <b id="displayName"></b>! –û–±–µ—Ä–∏ –≥—Ä—É:</div>
    <button class="menu-btn btn-create" onclick="startGame(1)"><span>üîë</span> –°—Ç–≤–æ—Ä–∏ –Ω–∞–¥—ñ–π–Ω–∏–π –ø–∞—Ä–æ–ª—å</button>
    <button class="menu-btn btn-detect" onclick="startGame(2)"><span>üïµÔ∏è</span> –î–µ—Ç–µ–∫—Ç–∏–≤ –ø–∞—Ä–æ–ª—ñ–≤</button>
    <button class="menu-btn btn-share" onclick="startGame(3)"><span>ü§´</span> –ö–æ–º—É –º–æ–∂–Ω–∞ —Å–∫–∞–∑–∞—Ç–∏ –ø–∞—Ä–æ–ª—å?</button>
  </div>

  <!-- GAME 1: Create Password -->
  <div id="game1" class="game-screen">
    <button class="back-btn" onclick="backToMenu()">‚Üê –ú–µ–Ω—é</button>
    <div class="card">
      <div class="card-title">üîë –ü—Ä–∏–¥—É–º–∞–π –Ω–∞–¥—ñ–π–Ω–∏–π –ø–∞—Ä–æ–ª—å:</div>
      <input type="text" class="password-input" id="pwdInput" maxlength="20" placeholder="–í–≤–µ–¥–∏ –ø–∞—Ä–æ–ª—å..." oninput="checkPassword()">
      <div class="strength-bar"><div class="strength-fill" id="strengthFill"></div></div>
      <div class="strength-text" id="strengthText"></div>
    </div>
    <div class="card">
      <div class="card-title">üìã –ü—Ä–∞–≤–∏–ª–∞ –Ω–∞–¥—ñ–π–Ω–æ–≥–æ –ø–∞—Ä–æ–ª—è:</div>
      <ul class="rules-list">
        <li><span class="rule-icon" id="r1">‚¨ú</span> –ú—ñ–Ω—ñ–º—É–º 6 —Å–∏–º–≤–æ–ª—ñ–≤</li>
        <li><span class="rule-icon" id="r2">‚¨ú</span> –Ñ –≤–µ–ª–∏–∫–∞ –ª—ñ—Ç–µ—Ä–∞ (–ê, –ë, –í...)</li>
        <li><span class="rule-icon" id="r3">‚¨ú</span> –Ñ –º–∞–ª–µ–Ω—å–∫–∞ –ª—ñ—Ç–µ—Ä–∞ (–∞, –±, –≤...)</li>
        <li><span class="rule-icon" id="r4">‚¨ú</span> –Ñ —Ü–∏—Ñ—Ä–∞ (1, 2, 3...)</li>
        <li><span class="rule-icon" id="r5">‚¨ú</span> –Ñ —Å–ø–µ—Ü—Å–∏–º–≤–æ–ª (!, @, #...)</li>
      </ul>
    </div>
    <div class="tip-box">ü™• <b>–ó–∞–ø–∞–º'—è—Ç–∞–π:</b> –ü–∞—Ä–æ–ª—å ‚Äî —è–∫ –∑—É–±–Ω–∞ —â—ñ—Ç–∫–∞: –¥–æ–≤–≥–∏–π, —Å–∫–ª–∞–¥–Ω–∏–π —ñ –Ω—ñ–∫–æ–º—É –Ω–µ –¥–∞—î–º–æ!</div>
  </div>

  <!-- GAME 2: Detective -->
  <div id="game2" class="game-screen">
    <button class="back-btn" onclick="backToMenu()">‚Üê –ú–µ–Ω—é</button>
    <div class="counter" id="detectCounter"></div>
    <div class="progress-dots" id="detectDots"></div>
    <div id="detectCard"></div>
    <div id="detectScore" style="display:none"></div>
  </div>

  <!-- GAME 3: Share -->
  <div id="game3" class="game-screen">
    <button class="back-btn" onclick="backToMenu()">‚Üê –ú–µ–Ω—é</button>
    <div class="counter" id="shareCounter"></div>
    <div class="progress-dots" id="shareDots"></div>
    <div id="shareCard"></div>
    <div id="shareScore" style="display:none"></div>
  </div>
</div>

<script>
// ===== GOOGLE FORM =====
const FORM_URL='https://docs.google.com/forms/d/e/1FAIpQLSf8ztX6jF4_4UcxvYRyVCYa4TZmnxvDIZx3GWHoRi4ZpqjiOQ/formResponse';
const FIELD_NAME='entry.1949831177';
const FIELD_GAME='entry.2111756861';
const FIELD_SCORE='entry.1424722999';
const FIELD_MAX='entry.677482511';

let playerName='';

function saveName(){
  const n=document.getElementById('nameInput').value.trim();
  if(!n){alert('–ù–∞–ø–∏—à–∏ —Å–≤–æ—î —ñ–º\'—è!');return}
  playerName=n;
  document.getElementById('displayName').textContent=n;
  document.getElementById('nameScreen').style.display='none';
  document.getElementById('menu').style.display='block';
}

function sendResult(game, score, max){
  const data=new URLSearchParams();
  data.append(FIELD_NAME, playerName);
  data.append(FIELD_GAME, game);
  data.append(FIELD_SCORE, score.toString());
  data.append(FIELD_MAX, max.toString());
  // Send silently via no-cors fetch
  fetch(FORM_URL, {method:'POST', mode:'no-cors', body:data}).catch(()=>{});
}

// ===== MENU =====
function startGame(n){
  document.getElementById('menu').style.display='none';
  document.getElementById('game'+n).style.display='block';
  if(n===2) initDetective();
  if(n===3) initShare();
}
function backToMenu(){
  document.querySelectorAll('.game-screen').forEach(g=>g.style.display='none');
  document.getElementById('menu').style.display='block';
}

// ===== GAME 1: Create Password =====
function checkPassword(){
  const pwd=document.getElementById('pwdInput').value;
  let score=0;
  const checks=[
    pwd.length>=6,
    /[A-Z–ê-–Ø“ê–Ñ–Ü–á]/.test(pwd),
    /[a-z–∞-—è“ë—î—ñ—ó]/.test(pwd),
    /[0-9]/.test(pwd),
    /[^a-zA-Z–∞-—è–ê-–Ø“ë—î—ñ—ó“ê–Ñ–Ü–á0-9]/.test(pwd)
  ];
  checks.forEach((c,i)=>{
    document.getElementById('r'+(i+1)).textContent=c?'‚úÖ':'‚¨ú';
    if(c) score++;
  });
  const fill=document.getElementById('strengthFill');
  const txt=document.getElementById('strengthText');
  const pct=score/5*100;
  fill.style.width=pct+'%';
  if(score<=1){fill.style.background='#f44336';txt.textContent='üî¥ –î—É–∂–µ —Å–ª–∞–±–∫–∏–π';txt.style.color='#f44336'}
  else if(score<=2){fill.style.background='#FF9800';txt.textContent='üü† –°–ª–∞–±–∫–∏–π';txt.style.color='#FF9800'}
  else if(score<=3){fill.style.background='#FFD700';txt.textContent='üü° –°–µ—Ä–µ–¥–Ω—ñ–π';txt.style.color='#DAA520'}
  else if(score<=4){fill.style.background='#4CAF50';txt.textContent='üü¢ –ù–∞–¥—ñ–π–Ω–∏–π!';txt.style.color='#4CAF50'}
  else{fill.style.background='#2e7d32';txt.textContent='üèÜ –°—É–ø–µ—Ä-–Ω–∞–¥—ñ–π–Ω–∏–π!';txt.style.color='#2e7d32';if(pwd.length>=6)launchConfetti()}
  if(!pwd){txt.textContent='';fill.style.width='0%'}
}

// ===== GAME 2: Detective =====
const passwords=[
  {pwd:'123456',safe:false,why:'–¶–µ –Ω–∞–π–ø–æ–ø—É–ª—è—Ä–Ω—ñ—à–∏–π –ø–∞—Ä–æ–ª—å —É —Å–≤—ñ—Ç—ñ! –•–∞–∫–µ—Ä–∏ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å –π–æ–≥–æ –ø–µ—Ä—à–∏–º.'},
  {pwd:'–°–æ–Ω—Ü–µ5!',safe:true,why:'–Ñ –≤–µ–ª–∏–∫–∞ –ª—ñ—Ç–µ—Ä–∞, —Ü–∏—Ñ—Ä–∞ —ñ —Å–ø–µ—Ü—Å–∏–º–≤–æ–ª ‚Äî –º–æ–ª–æ–¥–µ—Ü—å!'},
  {pwd:'password',safe:false,why:'"Password" ‚Äî —Ü–µ —Å–ª–æ–≤–æ "–ø–∞—Ä–æ–ª—å" –∞–Ω–≥–ª—ñ–π—Å—å–∫–æ—é. –ó–∞–Ω–∞–¥—Ç–æ –æ—á–µ–≤–∏–¥–Ω–æ!'},
  {pwd:'–ú—ñ–π–ö–æ—Ç2024',safe:true,why:'–î–æ–≤–≥–∏–π, —î –≤–µ–ª–∏–∫—ñ –π –º–∞–ª—ñ –ª—ñ—Ç–µ—Ä–∏ —Ç–∞ —Ü–∏—Ñ—Ä–∏ ‚Äî –¥–æ–±—Ä–µ!'},
  {pwd:'qwerty',safe:false,why:'–¶–µ –ø—Ä–æ—Å—Ç–æ –ø–µ—Ä—à—ñ –ª—ñ—Ç–µ—Ä–∏ –Ω–∞ –∫–ª–∞–≤—ñ–∞—Ç—É—Ä—ñ ‚Äî –¥—É–∂–µ –ª–µ–≥–∫–æ –≤–≥–∞–¥–∞—Ç–∏!'},
  {pwd:'111111',safe:false,why:'–û–¥–Ω–∞–∫–æ–≤—ñ —Ü–∏—Ñ—Ä–∏ ‚Äî –Ω–∞–π–ª–µ–≥—à–µ –≤–≥–∞–¥–∞—Ç–∏!'},
  {pwd:'–ó—ñ—Ä–∫–∞‚òÖ8',safe:true,why:'–ö—Ä–µ–∞—Ç–∏–≤–Ω–∏–π –ø–∞—Ä–æ–ª—å –∑—ñ —Å–ø–µ—Ü—Å–∏–º–≤–æ–ª–æ–º ‚Äî —á—É–¥–æ–≤–æ!'},
  {pwd:'–º–∞–º–∞',safe:false,why:'–ó–∞–Ω–∞–¥—Ç–æ –∫–æ—Ä–æ—Ç–∫–µ —ñ –ø—Ä–æ—Å—Ç–µ —Å–ª–æ–≤–æ. –õ–µ–≥–∫–æ –≤–≥–∞–¥–∞—Ç–∏!'},
  {pwd:'–®–∫–æ–ª–∞3#',safe:true,why:'–Ñ –≤–µ–ª–∏–∫–∞ –ª—ñ—Ç–µ—Ä–∞, —Ü–∏—Ñ—Ä–∞ —Ç–∞ —Å–ø–µ—Ü—Å–∏–º–≤–æ–ª ‚Äî –Ω–∞–¥—ñ–π–Ω–∏–π!'},
  {pwd:'0000',safe:false,why:'–ß–æ—Ç–∏—Ä–∏ –Ω—É–ª—ñ ‚Äî —Ü–µ –ø–µ—Ä—à–µ, —â–æ —Å–ø—Ä–æ–±—É—é—Ç—å!'},
];

let detectIdx=0, detectScore=0, detectAnswers=[];

function initDetective(){
  detectIdx=0;detectScore=0;detectAnswers=[];
  document.getElementById('detectScore').style.display='none';
  showDetectDots();
  showDetectCard();
}

function showDetectDots(){
  const dots=document.getElementById('detectDots');
  dots.innerHTML='';
  passwords.forEach((_,i)=>{
    const d=document.createElement('span');d.className='dot';
    if(i<detectIdx){d.className+=' '+(detectAnswers[i]?'dot-correct':'dot-wrong')}
    else if(i===detectIdx){d.className+=' dot-current'}
    dots.appendChild(d);
  });
  document.getElementById('detectCounter').textContent=`–ü–∏—Ç–∞–Ω–Ω—è ${detectIdx+1} –∑ ${passwords.length}`;
}

function showDetectCard(){
  if(detectIdx>=passwords.length){showDetectResult();return}
  const p=passwords[detectIdx];
  document.getElementById('detectCard').innerHTML=`
    <div class="password-card">
      <div style="font-size:14px;color:#888">–¶–µ–π –ø–∞—Ä–æ–ª—å –Ω–∞–¥—ñ–π–Ω–∏–π?</div>
      <div class="password-display">${p.pwd}</div>
      <div class="answer-btns">
        <button class="answer-btn btn-safe" onclick="answerDetect(true)">‚úÖ –ù–∞–¥—ñ–π–Ω–∏–π</button>
        <button class="answer-btn btn-unsafe" onclick="answerDetect(false)">‚ùå –ù–µ–Ω–∞–¥—ñ–π–Ω–∏–π</button>
      </div>
      <div class="feedback" id="detectFeedback"></div>
    </div>`;
}

function answerDetect(isSafe){
  const p=passwords[detectIdx];
  const correct=isSafe===p.safe;
  if(correct) detectScore++;
  detectAnswers.push(correct);
  const fb=document.getElementById('detectFeedback');
  fb.innerHTML=correct
    ?`<span style="color:#2e7d32">‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ!</span><br>${p.why}`
    :`<span style="color:#c62828">‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ!</span><br>${p.why}`;
  // Disable buttons
  document.querySelectorAll('.answer-btn').forEach(b=>b.disabled=true);
  setTimeout(()=>{detectIdx++;showDetectDots();showDetectCard()},2200);
}

function showDetectResult(){
  document.getElementById('detectCard').innerHTML='';
  document.getElementById('detectCounter').textContent='';
  const pct=detectScore/passwords.length*100;
  let emoji,msg;
  sendResult('–î–µ—Ç–µ–∫—Ç–∏–≤ –ø–∞—Ä–æ–ª—ñ–≤', detectScore, passwords.length);
  if(pct>=90){emoji='üèÜüéâ';msg='–¢–∏ —Å–ø—Ä–∞–≤–∂–Ω—ñ–π –¥–µ—Ç–µ–∫—Ç–∏–≤ –ø–∞—Ä–æ–ª—ñ–≤!';launchConfetti()}
  else if(pct>=70){emoji='üëèüïµÔ∏è';msg='–ß—É–¥–æ–≤–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç!';launchConfetti()}
  else if(pct>=50){emoji='ü§îüí™';msg='–ù–µ–ø–æ–≥–∞–Ω–æ, –∞–ª–µ —î –Ω–∞–¥ —á–∏–º –ø–æ–ø—Ä–∞—Ü—é–≤–∞—Ç–∏!'}
  else{emoji='üìö';msg='–ü–æ–≤—Ç–æ—Ä–∏ –ø—Ä–∞–≤–∏–ª–∞ —ñ —Å–ø—Ä–æ–±—É–π —â–µ —Ä–∞–∑!'}
  document.getElementById('detectScore').style.display='block';
  document.getElementById('detectScore').innerHTML=`
    <div class="score-section">
      <div class="score-emoji">${emoji}</div>
      <div class="score-big">${detectScore}/${passwords.length}</div>
      <div class="score-msg">${msg}</div>
      <button class="retry-btn" onclick="initDetective()">üîÑ –°–ø—Ä–æ–±—É–≤–∞—Ç–∏ —â–µ</button>
    </div>`;
}

// ===== GAME 3: Share =====
const situations=[
  {emoji:'üë¶',text:'–î—Ä—É–≥ —É —à–∫–æ–ª—ñ –∫–∞–∂–µ: "–°–∫–∞–∂–∏ –ø–∞—Ä–æ–ª—å –≤—ñ–¥ –≥—Ä–∏, —è —Ö–æ—á—É –ø–æ–≥—Ä–∞—Ç–∏!"',share:false,why:'–ù–∞–≤—ñ—Ç—å –Ω–∞–π–∫—Ä–∞—â–æ–º—É –¥—Ä—É–≥–æ–≤—ñ –Ω–µ –º–æ–∂–Ω–∞ –¥–∞–≤–∞—Ç–∏ –ø–∞—Ä–æ–ª—å ‚Äî –≤—ñ–Ω –º–æ–∂–µ –≤–∏–ø–∞–¥–∫–æ–≤–æ —Ä–æ–∑–∫–∞–∑–∞—Ç–∏ –∫–æ–º—É—Å—å.'},
  {emoji:'üë©',text:'–ú–∞–º–∞ –ø—Ä–æ—Å–∏—Ç—å –ø–∞—Ä–æ–ª—å –≤—ñ–¥ –ø–ª–∞–Ω—à–µ—Ç–∞.',share:true,why:'–ë–∞—Ç—å–∫–∏ ‚Äî —Ü–µ —Ç—ñ –ª—é–¥–∏, —è–∫–∏–º –º–æ–∂–Ω–∞ –¥–æ–≤—ñ—Ä—è—Ç–∏ –ø–∞—Ä–æ–ª—ñ. –í–æ–Ω–∏ –¥–æ–ø–æ–º–æ–∂—É—Ç—å, —è–∫—â–æ —â–æ—Å—å —Ç—Ä–∞–ø–∏—Ç—å—Å—è.'},
  {emoji:'üñ•Ô∏è',text:'–ù–∞ —Å–∞–π—Ç—ñ –∑\'—è–≤–∏–ª–æ—Å—å –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è: "–í–≤–µ–¥–∏ —Å–≤—ñ–π –ø–∞—Ä–æ–ª—å, —â–æ–± –≤–∏–≥—Ä–∞—Ç–∏ –ø—Ä–∏–∑!"',share:false,why:'–¶–µ —à–∞—Ö—Ä–∞–π—Å—Ç–≤–æ! –°–ø—Ä–∞–≤–∂–Ω—ñ —Å–∞–π—Ç–∏ –Ω—ñ–∫–æ–ª–∏ –Ω–µ –ø—Ä–æ—Å—è—Ç—å –ø–∞—Ä–æ–ª—å —É —Å–ø–ª–∏–≤–∞—é—á–∏—Ö –≤—ñ–∫–Ω–∞—Ö.'},
  {emoji:'üë®',text:'–¢–∞—Ç–æ –¥–æ–ø–æ–º–∞–≥–∞—î –Ω–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ –∫–æ–º–ø\'—é—Ç–µ—Ä —ñ –ø—Ä–æ—Å–∏—Ç—å –ø–∞—Ä–æ–ª—å.',share:true,why:'–¢–∞—Ç–æ ‚Äî —Ä—ñ–¥–Ω–∞ –ª—é–¥–∏–Ω–∞, —è–∫–∞ —Ö–æ—á–µ –¥–æ–ø–æ–º–æ–≥—Ç–∏. –ë–∞—Ç—å–∫–∞–º –º–æ–∂–Ω–∞ –¥–æ–≤—ñ—Ä—è—Ç–∏!'},
  {emoji:'üëß',text:'–û–¥–Ω–æ–∫–ª–∞—Å–Ω–∏—Ü—è —à–µ–ø–æ—á–µ: "–°–∫–∞–∂–∏ –ø–∞—Ä–æ–ª—å, —è –Ω—ñ–∫–æ–º—É-–Ω—ñ–∫–æ–º—É –Ω–µ —Å–∫–∞–∂—É!"',share:false,why:'–ù–∞–≤—ñ—Ç—å —è–∫—â–æ –æ–±—ñ—Ü—è—é—Ç—å –Ω–µ —Ä–æ–∑–∫–∞–∑—É–≤–∞—Ç–∏ ‚Äî –º–æ–∂—É—Ç—å –∑–∞–±—É—Ç–∏ –æ–±—ñ—Ü—è–Ω–∫—É. –ü–∞—Ä–æ–ª—å —Ç—ñ–ª—å–∫–∏ —Ç–≤—ñ–π!'},
  {emoji:'üì±',text:'–ù–µ–∑–Ω–∞–π–æ–º–µ—Ü—å —É —á–∞—Ç—ñ –ø–∏—à–µ: "–ü—Ä–∏–≤—ñ—Ç! –Ø–∫–∏–π —É —Ç–µ–±–µ –ø–∞—Ä–æ–ª—å?"',share:false,why:'–ù—ñ–∫–æ–ª–∏ –Ω–µ –¥–∞–≤–∞–π –ø–∞—Ä–æ–ª—å –Ω–µ–∑–Ω–∞–π–æ–º—Ü—è–º! –¶–µ –º–æ–∂–µ –±—É—Ç–∏ —à–∞—Ö—Ä–∞–π.'},
  {emoji:'üë©‚Äçüè´',text:'–í—á–∏—Ç–µ–ª—å–∫–∞ –ø—Ä–æ—Å–∏—Ç—å –ø–∞—Ä–æ–ª—å –≤—ñ–¥ —à–∫—ñ–ª—å–Ω–æ–≥–æ –∞–∫–∞—É–Ω—Ç—É, —â–æ–± –¥–æ–ø–æ–º–æ–≥—Ç–∏.',share:true,why:'–í—á–∏—Ç–µ–ª—å ‚Äî –¥–æ–≤—ñ—Ä–µ–Ω–∞ –¥–æ—Ä–æ—Å–ª—ñ –ª—é–¥–∏–Ω–∞. –£ —à–∫–æ–ª—ñ —Ü–µ –Ω–æ—Ä–º–∞–ª—å–Ω–æ.'},
  {emoji:'üìß',text:'–ü—Ä–∏–π—à–æ–≤ –ª–∏—Å—Ç: "–í–∞—à –∞–∫–∞—É–Ω—Ç –∑–ª–∞–º–∞–Ω–æ! –ù–∞–¥—ñ—à–ª—ñ—Ç—å –ø–∞—Ä–æ–ª—å –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏."',share:false,why:'–¶–µ —Ñ—ñ—à–∏–Ω–≥ ‚Äî –æ–±–º–∞–Ω! –°–ø—Ä–∞–≤–∂–Ω—ñ —Å–µ—Ä–≤—ñ—Å–∏ –Ω—ñ–∫–æ–ª–∏ –Ω–µ –ø—Ä–æ—Å—è—Ç—å –ø–∞—Ä–æ–ª—å —á–µ—Ä–µ–∑ email.'},
];

let shareIdx=0,shareScore2=0,shareAnswers=[];

function initShare(){
  shareIdx=0;shareScore2=0;shareAnswers=[];
  document.getElementById('shareScore').style.display='none';
  showShareDots();
  showShareCard();
}

function showShareDots(){
  const dots=document.getElementById('shareDots');
  dots.innerHTML='';
  situations.forEach((_,i)=>{
    const d=document.createElement('span');d.className='dot';
    if(i<shareIdx){d.className+=' '+(shareAnswers[i]?'dot-correct':'dot-wrong')}
    else if(i===shareIdx){d.className+=' dot-current'}
    dots.appendChild(d);
  });
  document.getElementById('shareCounter').textContent=`–°–∏—Ç—É–∞—Ü—ñ—è ${shareIdx+1} –∑ ${situations.length}`;
}

function showShareCard(){
  if(shareIdx>=situations.length){showShareResult();return}
  const s=situations[shareIdx];
  document.getElementById('shareCard').innerHTML=`
    <div class="situation-card">
      <div class="situation-emoji">${s.emoji}</div>
      <div class="situation-text">${s.text}</div>
      <div class="share-btns">
        <button class="share-btn btn-yes" onclick="answerShare(true)">‚úÖ –ú–æ–∂–Ω–∞</button>
        <button class="share-btn btn-no" onclick="answerShare(false)">üö´ –ù–µ –º–æ–∂–Ω–∞</button>
      </div>
      <div class="explain" id="shareExplain"></div>
    </div>`;
}

function answerShare(yes){
  const s=situations[shareIdx];
  const correct=yes===s.share;
  if(correct) shareScore2++;
  shareAnswers.push(correct);
  const ex=document.getElementById('shareExplain');
  ex.innerHTML=correct
    ?`<span style="color:#2e7d32">‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ!</span><br>${s.why}`
    :`<span style="color:#c62828">‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ!</span><br>${s.why}`;
  document.querySelectorAll('.share-btn').forEach(b=>b.disabled=true);
  setTimeout(()=>{shareIdx++;showShareDots();showShareCard()},2800);
}

function showShareResult(){
  document.getElementById('shareCard').innerHTML='';
  document.getElementById('shareCounter').textContent='';
  const pct=shareScore2/situations.length*100;
  let emoji,msg;
  sendResult('–ö–æ–º—É –º–æ–∂–Ω–∞ —Å–∫–∞–∑–∞—Ç–∏ –ø–∞—Ä–æ–ª—å', shareScore2, situations.length);
  if(pct>=90){emoji='üõ°Ô∏èüéâ';msg='–¢–∏ —á—É–¥–æ–≤–æ –∑–Ω–∞—î—à –ø—Ä–∞–≤–∏–ª–∞ –±–µ–∑–ø–µ–∫–∏!';launchConfetti()}
  else if(pct>=70){emoji='üëèüîí';msg='–î–æ–±—Ä–µ! –¢–∏ –º–∞–π–∂–µ –µ–∫—Å–ø–µ—Ä—Ç!';launchConfetti()}
  else if(pct>=50){emoji='ü§îüîë';msg='–ù–µ–ø–æ–≥–∞–Ω–æ, –∞–ª–µ –±—É–¥—å —É–≤–∞–∂–Ω—ñ—à–∏–º!'}
  else{emoji='üìö';msg='–ü–æ–≤—Ç–æ—Ä–∏ –ø—Ä–∞–≤–∏–ª–∞ –±–µ–∑–ø–µ–∫–∏ —ñ —Å–ø—Ä–æ–±—É–π —â–µ!'}
  document.getElementById('shareScore').style.display='block';
  document.getElementById('shareScore').innerHTML=`
    <div class="score-section">
      <div class="score-emoji">${emoji}</div>
      <div class="score-big">${shareScore2}/${situations.length}</div>
      <div class="score-msg">${msg}</div>
      <button class="retry-btn" onclick="initShare()">üîÑ –°–ø—Ä–æ–±—É–≤–∞—Ç–∏ —â–µ</button>
    </div>`;
}

// ===== Confetti =====
function launchConfetti(){
  const colors=['#FFD700','#FF6B6B','#4CAF50','#2196F3','#FF9800','#9C27B0'];
  for(let i=0;i<35;i++){setTimeout(()=>{const p=document.createElement('div');p.className='confetti-piece';p.style.left=Math.random()*100+'vw';p.style.background=colors[Math.floor(Math.random()*colors.length)];p.style.animationDuration=(2+Math.random()*2)+'s';p.style.width=(6+Math.random()*8)+'px';p.style.height=(6+Math.random()*8)+'px';document.body.appendChild(p);setTimeout(()=>p.remove(),4000)},i*50)}
}
</script>
</body>
</html>
